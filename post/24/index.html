<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="XAMPP 的使用 - 老徐博客,Tinypress">
    <meta name="description" content="XAMPP 的使用,Tinypress" />
    <title>XAMPP 的使用 - 老徐博客</title>
    <link href="/styles/main.css" rel="stylesheet" />
</head>
<body>
    <header class="head">
        <h1 class="head-title u-fl"><a href="/">老徐博客</a></h1>
        <nav class="head-nav u-fr">
            <ul class="head-nav__list">
                
            </ul>
        </nav>
    </header>
    <main class="main"><article class="post">
    <header class="post__head">
        <h1 class="post__title"><a href="/post/24">XAMPP 的使用</a></h1>
        <p datetime="2018/6/1 21:14:59" class="post__time">2018/6/1 21:14:59</p>
    </header>
    <div class="post__main echo">
        <p>最近在公司里配置了很多管理服务，覆盖了文件管理系统，知识管理系统，bug 追踪等，用的 XAMPP，在 Windows 和 CentOS 上跑的很是欢快，并且以往都是用的 Ubuntu 发行版，一旦用上 CentOS 后发现再也回不去了，CentOS 简直不要太好用了，如果有朋友觉得其他 Linux 服务器发行版好用的可以一起聊聊嘎。</p>
<p>所以，下面我以我的搬瓦工和阿里云上的 CentOS 为例，通常我会先更新一下系统：</p>
<pre><code>yum update
</code></pre>
<p>然后，下载 XAMPP:</p>
<pre><code>cd /tmp
wget https://www.apachefriends.org/xampp-files/7.2.5/xampp-linux-x64-7.2.5-0-installer.run
</code></pre>
<p>设置可执行权限，并且安装：</p>
<pre><code>chmod 777 xampp-linux-x64-7.2.5-0-installer.run
./xampp-linux-x64-7.2.5-0-installer.run
</code></pre>
<p>然后一步一步安装，安装完成后，启动 Apache + PHP + FTP + MySQL 服务：</p>
<pre><code>/opt/lampp/lampp start
</code></pre>
<p>启动后，进行安全性设置：</p>
<pre><code>/opt/lampp/lampp security
</code></pre>
<p>这里需要这是很多密码，有条件的话弄一张纸记下来备用。</p>
<p>接下来，大部分程序会使用数据库，我们每个程序建一个数据库用户，并且每一个用户只对应一个数据库，这也是为了安全隔离起见。首先连接数据库：</p>
<pre><code>/opt/lampp/bin/mysql -hlocalhost -uroot -p你的密码
</code></pre>
<p>如果密码有特殊符号，需要 \ 来转义，否则一直密码错误登陆失败。登陆成功后，使用下面查询语句列出有多少个数据库，注意分号是 SQL 的语句结束符，不带上语句是不会结束并执行的：</p>
<pre><code>show databases;
</code></pre>
<p>创建数据库很简单，使用 下面执行语句：</p>
<pre><code>create database 数据库名;
</code></pre>
<p>紧接着创建用户，授予对这个新创建的数据库的所有权限，尽量授予 localhost 访问方式，否则能被远程连接到数据库，这是极为不安全的。identified by 后面的就是密码了，单引号隔起来。</p>
<pre><code>create user 'test'@'localhost' identified by '123456';
grant all privileges on 数据库.* to 'test'@'localhost'
flush privileges; 
</code></pre>
<p>如果要安装 PHP 开发的程序，只需下载后解压到对应文件夹，我通常都放在 home 文件夹下。然后设置权限和所有者。</p>
<pre><code>chmod 777 -R /home/nextcloud
chown daemon:daemon -R /home/nextcloud
</code></pre>
<p>daemon 是 Apache 的用户组和用户，Apache 是不能以 root 用户启动的。</p>
<p>如果要关联到这个文件夹的站点，可以使用 Vhost 或 Alias，在什么情况下选择什么方式，很多朋友都会感到迷糊。</p>
<p>如果你只有一个域名，并且不能管理域名和建议更多的解析记录指向，或者没有域名，只有一个 IP，或者在局域网内，就用 Alias。有域名，可以随意设置解析记录，那就用 Vhost。</p>
<p>Vhost 默认是关闭的，开启很简单，去掉 /opt/lampp/etc/httpd.conf 的对应注释即可。如果使用的是 Vim，可以在命令模式下按 Shift+G 跳到最底行就能看到。</p>
<pre><code># Virtual hosts
Include etc/extra/httpd-vhosts.conf
</code></pre>
<p>然后编辑 /opt/lampp/etc/extra/httpd-vhosts.conf ，追加一个 VirtualHost 节。</p>
<pre><code>&lt;VirtualHost *:80&gt;
    ServerAdmin admin@admin.com
    DocumentRoot &quot;/home/nextcloud&quot;
    ServerName pan.baidu.net
    ServerAlias pan.baidu.net
    ErrorLog &quot;logs/pan.baidu.net-error_log&quot;
    CustomLog &quot;logs/pan.baidu.net-access_log&quot; common
    &lt;Directory &quot;/home/nextcloud&quot;&gt;
        Order allow,deny
        Allow from all
        # New directive needed in Apache 2.4.3:
        Require all granted
    &lt;/Directory&gt;
&lt;/VirtualHost&gt;
</code></pre>
<p>保存后，重启 XAMPP:</p>
<pre><code>/opt/lampp/lampp stopapache
/opt/lampp/lampp startapache
</code></pre>
<p>要设置 Alias 的话，编辑  /opt/lampp/etc/extra/httpd-xampp.conf ，增加 Alias 配置，坠吼对 alias module 验证一下是否已经开启：</p>
<pre><code>&lt;IfModule alias_module&gt;
        Alias /demo /home/demo
        &lt;Directory /home/demo&gt;
                Require all granted
        &lt;/Directory&gt;
&lt;/IfModule&gt;
</code></pre>
<p>至此，XAMPP 的基本用法就讲完啦！</p>

    </div>
</article></main>
    <footer class="foot">
        <div class="foot-copy u-fl">© 2018 老徐博客&nbsp;&nbsp;|&nbsp;&nbsp; POWERED BY TiNYFX</div>
        <menu class="page-menu u-fr">
            
            
        </menu>
    </footer>
</body>
</html>
