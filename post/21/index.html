<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="他换系统不用重装 android studio，只因多做了一件事 - 老徐博客,Tinypress">
    <meta name="description" content="他换系统不用重装 android studio，只因多做了一件事,Tinypress" />
    <title>他换系统不用重装 android studio，只因多做了一件事 - 老徐博客</title>
    <link href="/styles/main.css" rel="stylesheet" />
</head>
<body>
    <header class="head">
        <h1 class="head-title u-fl"><a href="/">老徐博客</a></h1>
        <nav class="head-nav u-fr">
            <ul class="head-nav__list">
                
            </ul>
        </nav>
    </header>
    <main class="main"><article class="post">
    <header class="post__head">
        <h1 class="post__title"><a href="/post/21">他换系统不用重装 android studio，只因多做了一件事</a></h1>
        <p datetime="2018/5/28 23:07:52" class="post__time">2018/5/28 23:07:52</p>
    </header>
    <div class="post__main echo">
        <p>android studio 默认会安装在 c 盘，虽然安装体积并不大。但是像 gradle 的缓存文件夹在用了一段时间之后会变得严重占用 c 盘空间了，还有 avd 文件夹，通常是模拟器的镜像，少则 3-5 G，多的几十 G ，这对于 ssd 硬盘来说简直是一种浪费。</p>
<p>诸如此类的问题还有第一次打开项目时 gradle build 执行非常久，这通常是在下载指定的 gradle 版本，但是由于某些不可描述的问题，造成无法下载或者速度很慢，我们只能干等着。当你面对打开你自己在另外一台电脑创建的项目时，需要从 maven 重新下载 dependencies 里的包，并且速度慢的惊人，有没有很绝望？</p>
<p>现在，是时候要改变这些状况了。</p>
<p>接下来，我们进行一般设置，让 android studio 变得便携，并且不再占用 c 盘空间。</p>
<ol>
<li>首先我们下载 android studio 的 zip 包，我的版本是 2.3.3，默认使用 gradle 3.3 。不要用需要安装的版本，这个zip包只是 IDE，不包含 SDK。然后解压待用。</li>
</ol>
<p>2.创建一个虚拟磁盘，设定大小为 500GB，格式为 vhdx，动态磁盘大小。</p>
<p><img src="/images/2018_5_636631457003221560.png" alt="" /></p>
<p>然后格式化成分区表为 GPT （GUID分区表）文件系统格式为 NTFS 的磁盘，假设分配盘符为 A，那么后面的涉及到盘符的都要保持一致，将解压好的 android studio 移到 A 盘中。</p>
<p>3.启动 android studio ，指定下载的 SDK 位置为 A:\SDK</p>
<p>4.设置下列的环境变量：</p>
<pre><code>GRADLE_HOME    -&gt;    A:\android\gradle\gradle-3.3
GRADLE_USER_HOME    -&gt;    A:\android\.gradle
ANDROID_SDK_HOME    -&gt;    A:\android\sdk
</code></pre>
<p>需要注意的是 A:\android\sdk 一定要包含 .android 文件夹，没有就创建一个，这种文件夹有点特殊不能直接创建，可以使用命令行 mkdir .android。</p>
<ol start="5">
<li>修改 idea.properties 文件里面的路径</li>
</ol>
<p><img src="/images/2018_5_636631457082657290.png" alt="" /></p>
<p>最后重启一下电脑，让环境变量生效，删除 C:\Users\你的用户名\ 里的 .android .AndroidStudio2.3 两个文件夹，重启后如果这两个文件不再生成或者里面没有文件说明整个配置生效了。</p>
<p>以后只需要拷贝这个 vhdx 文件，设置一下环境变量就可以在别的电脑愉快的使用 android studio 和创建的模拟器了。</p>

    </div>
</article></main>
    <footer class="foot">
        <div class="foot-copy u-fl">© 2018 老徐博客&nbsp;&nbsp;|&nbsp;&nbsp; POWERED BY TiNYFX</div>
        <menu class="page-menu u-fr">
            
            
        </menu>
    </footer>
</body>
</html>
