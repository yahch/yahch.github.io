<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Android 上使用 MPAndroidChart 绘制曲线图表 - ORIGAE,Tinypress">
    <meta name="description" content="Android 上使用 MPAndroidChart 绘制曲线图表,Tinypress" />
    <title>Android 上使用 MPAndroidChart 绘制曲线图表 - ORIGAE</title>
    <link href="/styles/main.css" rel="stylesheet" />
</head>
<body>
    <header class="head">
        <h1 class="head-title u-fl"><a href="/">ORIGAE</a></h1>
        <nav class="head-nav u-fr">
            <ul class="head-nav__list">
                
            </ul>
        </nav>
    </header>
    <main class="main"><article class="post">
    <header class="post__head">
        <h1 class="post__title"><a href="/post/12">Android 上使用 MPAndroidChart 绘制曲线图表</a></h1>
        <p datetime="5/28/2018 10:57:09 PM" class="post__time">5/28/2018 10:57:09 PM</p>
    </header>
    <div class="post__main echo">
        <p>最近看了一下 Android 上的图表控件，去年做过一款应用也已上架了，也用到了图表控件，但是只是按照官方 demo 集成了，并没有过多的研究。</p>
<p>我最近基本上是面向 Github 编程了，拿别人造好的轮子拿来用，不能直接用的就改改再用，实在不好实现的就劝说产品去改需求，基本这是个套路。</p>
<p>既然是图表控件，就上 github 一番搜索，关键字 chart，按照 java 一筛选，再按照 start 数量排序，由高到低。基本上 start 从高到低的图表控件就是 MPAndroidChart、hellocharts-android、WilliamChart、XCL-Charts、EazeGraph、Jgraph 这么几个了。再排除那些常年不更新的，issues 常年无人问津的一些库，我基本确定就使用 MPAndroidChart 了，我找其它库也是这么个套路。所以日常工作就是逛 github，看到中意的就 star make 一下，这和逛淘宝是一个道理[yahch]。</p>
<p>话不多说，先看一下最终效果。</p>
<p><img src="/images/2018_5_636631450663609400.gif" alt="" /></p>
<p>MPAndroidChart 的官方文档可以说是非常详细了，基本上只要照着来就行了。</p>
<p>第一步是 Gradle 引用和控件使用：</p>
<pre><code>allprojects {
	repositories {
		maven { url &quot;https://jitpack.io&quot; }
	}
}
</code></pre>
<p>基本上很多项目都是通过通过 maven 官方和 jitpack了，没什么好说的。</p>
<pre><code>dependencies {
	implementation 'com.github.PhilJay:MPAndroidChart:v3.0.3'
}
</code></pre>
<p>我这里只用到了折线图，其它还有很多种类的图表，把项目 clone 下来跑一遍就知道了。</p>
<pre><code>&lt;com.github.mikephil.charting.charts.LineChart
                android:id=&quot;@+id/lineChart1&quot;
                android:layout_width=&quot;match_parent&quot;
                android:layout_height=&quot;150dp&quot;
                android:layout_marginTop=&quot;10dp&quot;&gt;&lt;/com.github.mikephil.charting.charts.LineChart&gt;
</code></pre>
<p>第二步是构建要显示的数据。</p>
<pre><code>ArrayList&lt;Entry&gt; entryArrayList = new ArrayList&lt;&gt;();
for (int i = 0; i &lt; chartDataBean.Altitudes.length; i++) {
    Entry entry = new Entry(i, (float) chartDataBean.Altitudes[i]);
    entryArrayList.add(entry);
}
//yahch
</code></pre>
<p>Entry 的两个参数 x,y 都是 float 类型的，我开始以为都表示 x,y 轴的值，但是想想若是 x 轴不是数值那 float 类型也表示不了，其实这个 x 轴的 float 类型的值就是 x 轴的下标了。</p>
<p>在折线图表中，一个线条就是一个 LineDataSet ，构建线条，也很简单。就是一通设置，都是按照字面意思了。</p>
<pre><code>LineDataSet lineDataSet = new LineDataSet(entryArrayList, &quot;demo&quot;);
lineDataSet.setDrawCircles(false);
lineDataSet.setDrawFilled(true);
lineDataSet.setDrawValues(false);
if (Utils.getSDKInt() &gt;= 18) {
    Drawable drawable = ContextCompat.getDrawable(activity, R.drawable.chart_bg);
    lineDataSet.setFillDrawable(drawable);
} else {
    lineDataSet.setFillColor(Color.BLACK);
}
lineDataSet.setColor(Color.parseColor(&quot;#7093C9&quot;));
lineDataSet.setLineWidth(2f);
lineDataSet.setDrawHighlightIndicators(false);
lineDataSet.setMode(LineDataSet.Mode.CUBIC_BEZIER);
// yahch
</code></pre>
<p>LineChart 设置数据方法是 LineChart.setData(LineData lineData) ，所以还要构造一个 LineData 。</p>
<pre><code>LineData lineData = new LineData(lineDataSet);
</code></pre>
<p>假如我们有需求需要绘制一条平均刻线，可以使用 LimitLine。</p>
<pre><code>LimitLine avgLine = new LimitLine(123f);
avgLine.setLineColor(Color.parseColor(&quot;#FFFFFF&quot;));
lineChart1.getAxisLeft().addLimitLine(avgLine);
</code></pre>
<p>作为灵魂画手，我当时就画了一幅图。</p>
<p><img src="/images/2018_5_636631450794183960.png" alt="" /></p>
<p>然后点击全屏横向显示怎么个做法呢，很简单，这个并不是非要在当前的 Activity 中横向显示这个图表，重新开一个 Activity 就是了，并在 onCreate 的时候去掉 ActionBar 就行了。</p>
<pre><code> @Override
 protected void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     getSupportActionBar().hide();
     setContentView(R.layout.activity_full_altitude_chart);
 }
//yahch
</code></pre>
<p>那怎么横向呢，在 AndroidManifest.xml 设置这个 Activity 的 screenOrientation 参数为 landscape，强制设置横向屏幕即可。</p>
<p>OK，安装上的折线图表就搞完了，有木有很简单。[yahch]</p>

    </div>
</article></main>
    <footer class="foot">
        <div class="foot-copy u-fl">© 2018 ORIGAE&nbsp;&nbsp;|&nbsp;&nbsp; POWERED BY TiNYFX</div>
        <menu class="page-menu u-fr">
            
            
        </menu>
    </footer>
</body>
</html>
